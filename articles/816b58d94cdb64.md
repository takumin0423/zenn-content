---
title: "Biomeの検査対象から特定のファイル/フォルダを除外したい"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["zennfes2025free", "biome"]
published: true
publication_name: relic_tech
---

## はじめに
リンター + フォーマッターとしてBiomeを採用していますが、公式ドキュメントにあるような `pnpm exec biome init`をした直後のデフォルト設定だとnode_modulesやcloudflare-env.d.tsなどの型定義ファイルも検査対象に含まれたりと使い勝手が良くないです
また、[日本語公式ドキュメント](https://biomejs.dev/ja/guides/configure-biome/#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%84%A1%E8%A6%96%E3%81%99%E3%82%8B)に`files.ignore`を使った古い記述方法が残っていたりと分かりづらい印象を受けたので、v2以上のBiomeにおいて、特定のファイル/フォルダを検査対象から除外する設定を紹介します

https://biomejs.dev/reference/configuration/#filesincludes

## 前提
- Biome v2.x

## 設定
`biome.json`で以下のような設定をすることで、特定のファイル/フォルダを除外することが出来ます
```
{
  "files": {
    "includes": [
      "**",
      "!cloudflare-env.d.ts" # ファイルの場合
      "!node_modules",       # フォルダの場合、配下のファイル全てが検査対象から除外される
      "!**/*.test.ts"        # glob構文を使う場合
    ]
  }
}
```

- `file.includes`内で`!`から始まる否定パターンを使うと特定のファイル/フォルダをBiomeの検査対象から除外できる
  - `!`による否定パターンを使う場合は、必ず配列の先頭で`**`を指定し、全てのファイルとフォルダをマッチングさせる必要がある

- `files.includes`での設定はBiomeの全てのツールに適用される
  - 各ツールごとに詳細なファイルマッチングを行いたい場合は、`<tool>.includes`を使用する

```
{
  "formatter": {
    "includes": ["src/**/*.js", "test/**/*.js"]
  },
  "linter": {
    "includes": ["**", "!test/**"]
  }
}
```

## まとめ
BiomeはESLint + Prettierを1つのツールで置き換えられ、リンターやフォーマッターとしてのパフォーマンスも高いことで注目を集めています
その一方でまだ比較的新しいツールということもあり、日本語公式ドキュメントが一部古かったり、ネット上の情報が少なかったりもするので、もしBiomeを採用していて記事タイトルのような状況に遭遇した場合は参考にしてみてください

